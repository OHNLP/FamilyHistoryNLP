{
  "id": "nlp_ohdsi_to_ohdsi",
  "description": "A pipeline configuration that extracts clinical narratives from OHDSI CDM, runs a MedTagger NLP rulesets, and outputs back to OHDSI CDM.",
  "pipeline": [
    {
      "clazz": "org.ohnlp.backbone.io.local.FileSystemExtract",
      "config": {
        "fileSystemPath": "/path/to/your/input/folder",
        "recordIDField": "note_id",
        "recordBodyField": "note_text"
      }
    },
    {
      "clazz": "org.ohnlp.medtagger.backbone.MedTaggerBackboneTransform",
      "config": {
        "_desc": "Runs NLP. In this case, we use pasc ruleset that is bundled by default as an example",
        "_desc_ctd": "Note: you will need to install the MedTagger Backbone Component found at https://www.github.com/OHNLP/MedTagger",
        "input": "note_text",
        "ruleset": "Family_History|MedTagger.FH_all.lookup.dict",
        "mode": "STANDALONE_DICT_AND_IE"
      }
    },
    {
      "clazz": "org.ohnlp.backbone.io.local.CSVLoad",
      "config": {
        "_desc": "Writes MedTagger output to file as a CSV",
        "_desc_ctd": "Not guaranteed to function on all platforms",
        "fileSystemPath": "/path/to/your/output/folder",
        "writeHeader": true,
        "fields": [
          "note_id",
		  "medtagger_matched_text",
		  "medtagger_concept_code",
		  "medtagger_matched_sentence",
		  "medtagger_section_id",
		  "medtagger_nlp_run_dtm",
		  "medtagger_certainty",
		  "medtagger_experiencer",
		  "medtagger_status",
		  "medtagger_offset",
		  "medtagger_semgroups"
        ]
      }
    }
  ]
}